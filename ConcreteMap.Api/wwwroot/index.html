<!DOCTYPE html>
<html lang="ru">
<head>
    <script>
        const token = localStorage.getItem('jwt_token');
        if (!token) window.location.href = 'login.html';

        document.addEventListener("DOMContentLoaded", () => {
            const role = localStorage.getItem('user_role');
            const btn = document.getElementById('top-btn');
            
            if (role === 'Admin') {
                btn.href = "admin.html";
                btn.innerHTML = "⚙️ Админка";
            } else {
                // Если это обычный сотрудник - кнопка работает как Выход
                btn.href = "#";
                btn.innerHTML = "🚪 Выйти";
                btn.onclick = (e) => {
                    e.preventDefault();
                    localStorage.removeItem('jwt_token');
                    localStorage.removeItem('user_role');
                    window.location.href = 'login.html';
                };
            }
        });
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Карта ЖБИ Заводов</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

    <!-- Панель поиска (СЛЕВА) -->
    <div class="search-panel">
        <input type="text" id="search-input" placeholder="Поиск (напр. Лотки, Люберцы)...">
        <button id="search-btn">Найти</button>
    </div>

    <!-- Кнопка Входа (СПРАВА) -->
    <a href="admin.html" class="map-admin-btn" id="top-btn">⚙️ Админка</a>

    <!-- Карта -->
    <div id="map"></div>

    <script src="js/app.js"></script>
</body>
</html>